<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Profile â€“ GamiCon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        h1, h2, h3 { font-family: 'Press Start 2P', cursive; }
        .btn-8bit { border: 4px solid #000; transition: all 0.2s ease-in-out; }
        .btn-8bit:hover { transform: translate(-2px, -2px); box-shadow: 6px 6px 0px #000; }
        .profile-card { background-color: #1f2937; border: 4px solid #4b5563; }
        .section-title { font-family: 'Press Start 2P', cursive; font-size: 0.9rem; color: #9ca3af; }
        .trait-pill { display: inline-block; padding: 0.3rem 0.8rem; border-radius: 9999px; font-weight: 600; font-size: 0.8rem; }
        .account-icon { opacity: 0.3; filter: grayscale(100%); transition: all 0.3s; }
        .account-icon.connected { opacity: 1; filter: none; }
    </style>
</head>
<body class="bg-black text-white antialiased">
    <div class="min-h-screen flex items-center justify-center p-4">
        <div id="profile-container" class="max-w-xl w-full">
            <!-- This container will be populated by JavaScript -->
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const profileContainer = document.getElementById('profile-container');
            const profile = JSON.parse(localStorage.getItem('userProfile'));

            if (!profile) {
                profileContainer.innerHTML = `
                    <div class="profile-card p-8 text-center rounded-lg">
                        <h1 class="text-2xl mb-4">Profile Not Found</h1>
                        <p class="text-gray-400 mb-8">You haven't created a profile yet. Let's get started!</p>
                        <a href="index2.html?action=signup" class="btn-8bit inline-block bg-blue-600 text-white font-bold py-3 px-6 rounded-md text-lg">
                            Create Profile
                        </a>
                    </div>
                `;
                return;
            }

            // --- Helper function to render traits ---
            const renderTraits = (traits) => {
                if (!traits || Object.keys(traits).length === 0) return '<p class="text-gray-500">No traits selected.</p>';
                
                let traitsHTML = '<div class="space-y-4">';
                const categoryMap = {
                    games: { title: "Game Genres", color: "bg-blue-500 text-white" },
                    vibe: { title: "Player Vibe", color: "bg-green-500 text-white" },
                    hours: { title: "Active Hours", color: "bg-amber-500 text-gray-900" },
                    comm: { title: "Communication", color: "bg-red-500 text-white" }
                };

                for (const category in categoryMap) {
                    if (traits[category] && traits[category].length > 0) {
                        traitsHTML += `<div><h3 class="font-semibold text-gray-300 mb-2">${categoryMap[category].title}</h3><div class="flex flex-wrap gap-2">`;
                        traits[category].forEach(trait => {
                            traitsHTML += `<span class="trait-pill ${categoryMap[category].color}">${trait}</span>`;
                        });
                        traitsHTML += `</div></div>`;
                    }
                }
                traitsHTML += '</div>';
                return traitsHTML;
            };

            // --- Build the Profile Card HTML ---
            const profileHTML = `
                <div class="profile-card p-6 md:p-8 rounded-lg">
                    <div class="text-center">
                        <img src="https://i.pravatar.cc/100?u=${profile.username || 'default'}" alt="Avatar" class="w-24 h-24 rounded-full mx-auto border-4 border-gray-500 mb-4">
                        <h1 class="text-2xl">${profile.username || 'N/A'}</h1>
                        <p class="text-gray-400">${profile.email || 'N/A'}</p>
                    </div>

                    <hr class="border-gray-600 my-6">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                        <div>
                            <h3 class="section-title">Birthday</h3>
                            <p class="font-semibold text-lg">${profile.birthday || 'N/A'}</p>
                        </div>
                        <div>
                            <h3 class="section-title">Gender</h3>
                            <p class="font-semibold text-lg capitalize">${profile.gender || 'N/A'}</p>
                        </div>
                    </div>

                    <hr class="border-gray-600 my-6">

                    <div>
                        <h3 class="section-title mb-3">Connected Accounts</h3>
                        <div class="flex items-center justify-center gap-6">
                            <img src="index3images/Steam_icon_logo.svg.png" alt="Steam" class="h-10 account-icon ${profile.connectedAccounts?.steam ? 'connected' : ''}">
                            <img src="index3images/download.png" alt="Riot" class="h-10 account-icon ${profile.connectedAccounts?.riot ? 'connected' : ''}">
                            <img src="index3images/discord-logo.png" alt="Discord" class="h-10 account-icon ${profile.connectedAccounts?.discord ? 'connected' : ''}">
                        </div>
                    </div>

                    <hr class="border-gray-600 my-6">

                    <div>
                        <h3 class="section-title mb-4">Your Player DNA</h3>
                        ${renderTraits(profile.traits)}
                    </div>
                </div>

                <div class="mt-8 flex flex-col md:flex-row gap-4 justify-center">
                     <a href="main1.html" class="btn-8bit block w-full md:w-auto text-center bg-gray-600 text-white font-bold py-3 px-6 rounded-md text-base">Back to Dashboard</a>
                     <a href="index2.html?action=signup" class="btn-8bit block w-full md:w-auto text-center bg-blue-600 text-white font-bold py-3 px-6 rounded-md text-base">Edit Profile</a>
                </div>
            `;
            
            profileContainer.innerHTML = profileHTML;
        });
    </script>
</body>
</html>